/* TutorialOverlay.css - Complete Fix for GamificationOnboarding Component */
/* Fixes white text on white background issue */
/* Material Design 3 Compliant */

/* ================================================
   CRITICAL FIX: Override inline styles to ensure visibility
   ================================================ */

/* Target the overlay backdrop */
div[style*="position: fixed"][style*="rgba(0, 0, 0, 0.8)"] {
  background: rgba(0, 0, 0, 0.85) !important;
  z-index: 9999 !important;
}

/* Target all text elements within the modal */
div[style*="position: fixed"] * {
  color: inherit;
}

/* Force visible text color on all paragraph elements */
div[style*="position: fixed"] p {
  color: rgb(var(--md-sys-color-on-surface)) !important;
}

/* Force visible text color on all headings */
div[style*="position: fixed"] h2,
div[style*="position: fixed"] h3,
div[style*="position: fixed"] h4 {
  color: rgb(var(--md-sys-color-on-surface)) !important;
}

/* Force visible text color on all divs with text content */
div[style*="position: fixed"] div[style*="fontSize"] {
  color: rgb(var(--md-sys-color-on-surface)) !important;
}

/* Ensure spans are visible */
div[style*="position: fixed"] span {
  color: inherit !important;
}

/* ================================================
   SPECIFIC FIXES FOR INLINE STYLED ELEMENTS
   ================================================ */

/* Fix text in surface containers */
div[style*="rgb(var(--md-sys-color-surface-container))"] {
  background: rgb(var(--md-sys-color-surface-container)) !important;
  color: rgb(var(--md-sys-color-on-surface)) !important;
}

div[style*="rgb(var(--md-sys-color-surface-container))"] * {
  color: rgb(var(--md-sys-color-on-surface)) !important;
}

/* Fix text in primary containers */
div[style*="rgb(var(--md-sys-color-primary-container))"] {
  background: rgb(var(--md-sys-color-primary-container)) !important;
}

div[style*="rgb(var(--md-sys-color-primary-container))"] * {
  color: rgb(var(--md-sys-color-on-primary-container)) !important;
}

/* ================================================
   ENSURE MD3CARD IS VISIBLE
   ================================================ */

/* Target the MD3Card wrapper */
div[style*="maxWidth: '600px'"],
div[style*="max-width: 600px"],
div[style*="maxWidth"][style*="600"] {
  background: rgb(var(--md-sys-color-surface-container)) !important;
  color: rgb(var(--md-sys-color-on-surface)) !important;
  border: 1px solid rgb(var(--md-sys-color-outline-variant)) !important;
}

/* Ensure card content is visible */
div[style*="maxWidth: '600px'"] *,
div[style*="max-width: 600px"] *,
div[style*="maxWidth"][style*="600"] * {
  color: inherit;
}

div[style*="maxWidth: '600px'"] h2,
div[style*="max-width: 600px"] h2,
div[style*="maxWidth"][style*="600"] h2 {
  color: rgb(var(--md-sys-color-on-surface)) !important;
}

div[style*="maxWidth: '600px'"] p,
div[style*="max-width: 600px"] p,
div[style*="maxWidth"][style*="600"] p {
  color: rgb(var(--md-sys-color-on-surface-variant)) !important;
}

/* ================================================
   FIX FOR SPECIFIC SECTIONS
   ================================================ */

/* Progress indicator dots */
div[style*="width: '32px'"][style*="height: '4px'"],
div[style*="width: 32px"][style*="height: 4px"],
div[style*="width"][style*="32"][style*="height"][style*="4"] {
  background: rgb(var(--md-sys-color-outline-variant)) !important;
}

div[style*="width: '32px'"][style*="height: '4px'"][style*="rgb(var(--md-sys-color-primary))"],
div[style*="width: 32px"][style*="height: 4px"][style*="rgb(var(--md-sys-color-primary))"],
div[style*="rgb(var(--md-sys-color-primary))"][style*="width"][style*="32"] {
  background: rgb(var(--md-sys-color-primary)) !important;
}

/* ================================================
   STEP CONTENT STYLING
   ================================================ */

/* Ensure step titles are visible */
div[style*="position: fixed"] div[style*="marginBottom: '32px'"] h2,
div[style*="position: fixed"] div[style*="margin-bottom: 32px"] h2 {
  color: rgb(var(--md-sys-color-on-surface)) !important;
  font-weight: 600 !important;
}

/* Ensure step descriptions are visible */
div[style*="position: fixed"] div[style*="marginBottom: '32px'"] p,
div[style*="position: fixed"] div[style*="margin-bottom: 32px"] p {
  color: rgb(var(--md-sys-color-on-surface-variant)) !important;
  line-height: 1.5 !important;
}

/* Step counter text */
div[style*="fontSize: '14px'"][style*="color: rgb(var(--md-sys-color-on-surface-variant))"] {
  color: rgb(var(--md-sys-color-on-surface-variant)) !important;
  opacity: 1 !important;
}

/* ================================================
   BUTTON FIXES
   ================================================ */

/* Ensure all buttons in the modal are visible */
div[style*="position: fixed"] button {
  min-height: 40px !important;
  cursor: pointer !important;
}

/* Fix button text visibility */
div[style*="position: fixed"] button * {
  color: inherit !important;
}

/* ================================================
   ICON FIXES
   ================================================ */

/* Ensure Material Icons are visible */
div[style*="position: fixed"] .material-symbols-outlined {
  color: inherit !important;
  font-size: inherit !important;
}

/* Close button icon */
button[style*="position: absolute"] .material-symbols-outlined {
  color: rgb(var(--md-sys-color-on-surface)) !important;
}

/* ================================================
   FALLBACK: FORCE ALL TEXT TO BE VISIBLE
   ================================================ */

/* If MD3 tokens fail, use safe fallback colors */
@supports not (color: rgb(var(--md-sys-color-on-surface))) {
  div[style*="position: fixed"] * {
    color: #1a1a1a !important; /* Dark text fallback */
  }
  
  div[style*="position: fixed"] {
    background: rgba(0, 0, 0, 0.90) !important; /* Darker backdrop */
  }
  
  div[style*="maxWidth: '600px'"],
  div[style*="max-width: 600px"],
  div[style*="maxWidth"][style*="600"] {
    background: #ffffff !important; /* White card background */
    color: #1a1a1a !important; /* Dark text */
  }
}

/* ================================================
   DARK MODE SUPPORT
   ================================================ */

@media (prefers-color-scheme: dark) {
  div[style*="maxWidth: '600px'"],
  div[style*="max-width: 600px"],
  div[style*="maxWidth"][style*="600"] {
    background: rgb(var(--md-sys-color-surface-container-high)) !important;
  }
  
  /* Ensure text is still visible in dark mode */
  div[style*="position: fixed"] h2,
  div[style*="position: fixed"] h3,
  div[style*="position: fixed"] h4 {
    color: rgb(var(--md-sys-color-on-surface)) !important;
  }
  
  div[style*="position: fixed"] p,
  div[style*="position: fixed"] span,
  div[style*="position: fixed"] div {
    color: rgb(var(--md-sys-color-on-surface-variant)) !important;
  }
}

/* ================================================
   MOBILE RESPONSIVE
   ================================================ */

@media (max-width: 640px) {
  div[style*="maxWidth: '600px'"],
  div[style*="max-width: 600px"],
  div[style*="maxWidth"][style*="600"] {
    max-width: calc(100vw - 40px) !important;
    padding: 24px 16px !important;
    margin: 20px !important;
  }

  div[style*="position: fixed"] h2 {
    font-size: 20px !important;
  }

  div[style*="position: fixed"] p {
    font-size: 14px !important;
  }
}

/* ================================================
   ACCESSIBILITY
   ================================================ */

/* High contrast mode */
@media (prefers-contrast: high) {
  div[style*="position: fixed"] * {
    color: rgb(var(--md-sys-color-on-surface)) !important;
    font-weight: 500 !important;
  }

  div[style*="maxWidth: '600px'"],
  div[style*="max-width: 600px"],
  div[style*="maxWidth"][style*="600"] {
    border: 2px solid rgb(var(--md-sys-color-outline)) !important;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  div[style*="transition"],
  div[style*="animation"] {
    transition: none !important;
    animation: none !important;
  }
}

/* ================================================
   FOCUS STATES
   ================================================ */

/* Ensure focus is visible */
div[style*="position: fixed"] button:focus,
div[style*="position: fixed"] button:focus-visible {
  outline: 2px solid rgb(var(--md-sys-color-primary)) !important;
  outline-offset: 2px !important;
}

/* ================================================
   ADDITIONAL FIXES FOR GAMIFICATION ONBOARDING
   ================================================ */

/* Fix for step content containers */
div[style*="display: flex"][style*="align-items: center"] {
  gap: 12px;
}

/* Fix for step icons */
div[style*="display: flex"][style*="align-items: center"] span {
  color: rgb(var(--md-sys-color-on-surface)) !important;
}

/* Fix for bullet points/list items */
div[style*="position: fixed"] ul,
div[style*="position: fixed"] ol {
  color: rgb(var(--md-sys-color-on-surface-variant)) !important;
  padding-left: 20px !important;
}

div[style*="position: fixed"] li {
  color: rgb(var(--md-sys-color-on-surface-variant)) !important;
  margin-bottom: 8px !important;
}

/* Fix for code blocks if present */
div[style*="position: fixed"] code,
div[style*="position: fixed"] pre {
  background: rgb(var(--md-sys-color-surface-variant)) !important;
  color: rgb(var(--md-sys-color-on-surface-variant)) !important;
  padding: 2px 6px !important;
  border-radius: 4px !important;
}

/* ================================================
   SPECIFIC GAMIFICATION ONBOARDING FIXES
   ================================================ */

/* Fix for feature highlight sections */
div[style*="background: rgb(var(--md-sys-color-primary-container))"] {
  background: rgb(var(--md-sys-color-primary-container)) !important;
}

div[style*="background: rgb(var(--md-sys-color-primary-container))"] * {
  color: rgb(var(--md-sys-color-on-primary-container)) !important;
}

/* Fix for secondary containers */
div[style*="background: rgb(var(--md-sys-color-secondary-container))"] {
  background: rgb(var(--md-sys-color-secondary-container)) !important;
}

div[style*="background: rgb(var(--md-sys-color-secondary-container))"] * {
  color: rgb(var(--md-sys-color-on-secondary-container)) !important;
}

/* Fix for tertiary containers */
div[style*="background: rgb(var(--md-sys-color-tertiary-container))"] {
  background: rgb(var(--md-sys-color-tertiary-container)) !important;
}

div[style*="background: rgb(var(--md-sys-color-tertiary-container))"] * {
  color: rgb(var(--md-sys-color-on-tertiary-container)) !important;
}

/* ================================================
   NAVIGATION BUTTON FIXES
   ================================================ */

/* Previous/Next buttons */
div[style*="display: flex"][style*="justifyContent: 'space-between'"] button,
div[style*="display: flex"][style*="justify-content: space-between"] button {
  color: inherit !important;
}

/* Button group spacing */
div[style*="display: flex"][style*="gap: '8px'"],
div[style*="display: flex"][style*="gap: 8px"] {
  gap: 8px !important;
}

/* ================================================
   DEBUGGING (Comment out in production)
   ================================================ */

/* Uncomment to see which elements are being targeted */
/*
div[style*="position: fixed"] {
  outline: 2px solid red !important;
}

div[style*="maxWidth: '600px'"],
div[style*="max-width: 600px"],
div[style*="maxWidth"][style*="600"] {
  outline: 2px solid blue !important;
}

div[style*="position: fixed"] * {
  outline: 1px solid green !important;
}
*/

/* ================================================
   PRINT STYLES (If needed)
   ================================================ */

@media print {
  div[style*="position: fixed"] {
    position: relative !important;
    background: white !important;
    color: black !important;
  }

  div[style*="position: fixed"] * {
    color: black !important;
  }
}

/* End of TutorialOverlay.css */