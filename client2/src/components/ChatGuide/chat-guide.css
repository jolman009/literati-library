/* Floating chat guide widget */
.chat-guide { position: fixed; right: 20px; bottom: 20px; z-index: 1100; }

.chat-guide__fab {
  width: 52px; height: 52px; border-radius: 26px;
  background: var(--md-sys-color-primary, #2563eb);
  color: var(--md-sys-color-on-primary, #fff);
  border: none; cursor: pointer; font-size: 22px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.2);
}

.chat-guide__panel {
  width: min(360px, calc(100vw - 32px));
  height: 440px; display: flex; flex-direction: column;
  background: var(--md-sys-color-surface, #0b0b0b);
  color: var(--md-sys-color-on-surface, #e5e5e5);
  border-radius: 16px; box-shadow: 0 12px 30px rgba(0,0,0,0.35);
  overflow: hidden;
}

.chat-guide__header { display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; background: var(--md-sys-color-surface-container, #111); }
.chat-guide__close { background: transparent; color: inherit; border: none; font-size: 20px; cursor: pointer; }

.chat-guide__messages { flex: 1; overflow: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
.chat-guide__msg { display: flex; }
.chat-guide__msg--user { justify-content: flex-end; }
.chat-guide__msg--assistant { justify-content: flex-start; }
.chat-guide__bubble { max-width: 80%; padding: 8px 10px; border-radius: 12px; line-height: 1.3; font-size: 14px; white-space: pre-wrap; }
.chat-guide__msg--assistant .chat-guide__bubble { background: var(--md-sys-color-surface-container-high, #1c1c1c); color: var(--md-sys-color-on-surface, #e5e5e5); }
.chat-guide__msg--user .chat-guide__bubble { background: var(--md-sys-color-primary, #2563eb); color: var(--md-sys-color-on-primary, #fff); }

.chat-guide__suggestions { display: flex; gap: 6px; flex-wrap: wrap; padding: 6px 10px; }
.chat-guide__chip { border: 1px solid var(--md-sys-color-outline, #2b2b2b); background: transparent; color: inherit; padding: 6px 8px; border-radius: 999px; cursor: pointer; font-size: 12px; }

.chat-guide__input { display: flex; gap: 8px; padding: 8px; border-top: 1px solid var(--md-sys-color-outline, #2b2b2b); }
.chat-guide__input input { flex: 1; background: var(--md-sys-color-surface, #0b0b0b); color: var(--md-sys-color-on-surface, #e5e5e5); border: 1px solid var(--md-sys-color-outline, #2b2b2b); border-radius: 10px; padding: 8px 10px; }
.chat-guide__input button { background: var(--md-sys-color-primary, #2563eb); color: var(--md-sys-color-on-primary, #fff); border: none; border-radius: 10px; padding: 8px 12px; cursor: pointer; }

@media (max-width: 480px) {
  .chat-guide { right: 12px; bottom: 12px; }
}

/* Modal overlay for source preview */
.chat-guide__overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.5);
  display: flex; align-items: center; justify-content: center; z-index: 1200;
}
.chat-guide__modal { width: min(720px, calc(100vw - 40px)); max-height: min(70vh, 640px); background: var(--md-sys-color-surface, #0b0b0b); color: var(--md-sys-color-on-surface, #e5e5e5); border-radius: 14px; box-shadow: 0 12px 30px rgba(0,0,0,0.35); display: flex; flex-direction: column; overflow: hidden; }
.chat-guide__modal-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; background: var(--md-sys-color-surface-container, #111); }
.chat-guide__modal-body { padding: 12px; overflow: auto; }
.chat-guide__sources { display: flex; flex-direction: column; gap: 12px; }
.chat-guide__source-title { font-weight: 600; margin-bottom: 6px; opacity: 0.9; }
.chat-guide__source-content { white-space: pre-wrap; background: var(--md-sys-color-surface-container-high, #1c1c1c); color: var(--md-sys-color-on-surface, #e5e5e5); padding: 10px; border-radius: 10px; max-height: 240px; overflow: auto; }
